/* shadowVIC â€“ Copyright (c) 2015 Sven Michael Klose <pixel@hugbox.org> */

#include <stdio.h>
#include <string.h>

#include "types.h"
#include "config.h"
#include "6502.h"
#include "shadowvic.h"
#include "joystick.h"
#include "video.h"
#include "sync.h"

byte pulse_image[] = {76, 12, 32, 162, 7, 169, 48, 149, 248, 202, 16, 251, 162, 0, 160, 5, 169, 32, 157, 255, 29, 157, 252, 30, 202, 208, 245, 169, 32, 141, 14, 144, 169, 242, 141, 5, 144, 162, 0, 189, 150, 32, 240, 15, 157, 110, 30, 232, 208, 245, 238, 41, 32, 238, 46, 32, 76, 39, 32, 169, 8, 141, 15, 144, 169, 0, 133, 0, 133, 2, 160, 150, 132, 1, 200, 132, 3, 169, 0, 141, 19, 145, 173, 17, 145, 41, 32, 240, 48, 32, 158, 33, 240, 28, 141, 14, 144, 74, 169, 1, 144, 2, 169, 5, 145, 0, 145, 2, 200, 32, 158, 33, 41, 1, 24, 105, 21, 141, 1, 144, 208, 211, 169, 25, 141, 15, 144, 162, 12, 202, 208, 253, 34, 2, 76, 59, 32, 169, 252, 141, 5, 144, 169, 14, 141, 15, 144, 76, 193, 41, 79, 21, 18, 32, 5, 14, 5, 13, 9, 5, 19, 32, 14, 15, 23, 32, 1, 20, 20, 1, 3, 11, 32, 32, 32, 21, 19, 32, 6, 18, 15, 13, 32, 20, 8, 5, 32, 50, 48, 20, 8, 32, 32, 32, 4, 9, 13, 5, 14, 19, 9, 15, 14, 33, 32, 87, 5, 32, 8, 1, 19, 20, 9, 12, 25, 32, 3, 18, 5, 1, 20, 5, 4, 32, 1, 32, 4, 18, 15, 14, 5, 32, 18, 5, 13, 15, 20, 5, 3, 15, 14, 20, 18, 15, 12, 32, 19, 15, 6, 20, 23, 1, 18, 5, 46, 32, 89, 15, 21, 32, 32, 1, 18, 5, 32, 15, 14, 5, 32, 15, 6, 32, 20, 8, 5, 32, 12, 1, 19, 20, 32, 32, 16, 9, 12, 15, 20, 19, 32, 23, 9, 20, 8, 32, 20, 8, 5, 32, 18, 9, 7, 8, 20, 32, 8, 1, 18, 4, 23, 1, 18, 5, 32, 20, 15, 32, 21, 19, 5, 32, 9, 20, 32, 15, 21, 20, 32, 20, 8, 5, 18, 5, 46, 32, 87, 5, 32, 4, 15, 14, 39, 20, 32, 11, 14, 15, 23, 32, 32, 32, 23, 8, 1, 20, 32, 20, 15, 32, 5, 24, 16, 5, 3, 20, 46, 32, 87, 5, 32, 32, 32, 32, 32, 32, 3, 15, 21, 14, 20, 32, 15, 14, 32, 25, 15, 21, 46, 32, 32, 32, 32, 32, 32, 71, 15, 15, 4, 32, 12, 21, 3, 11, 33, 32, 72, 9, 20, 32, 6, 9, 18, 5, 33, 0, 165, 11, 10, 105, 0, 77, 4, 144, 73, 1, 133, 11, 96, 134, 73, 132, 74, 162, 7, 56, 189, 4, 30, 105, 0, 201, 58, 144, 13, 224, 5, 208, 6, 230, 64, 169, 15, 133, 67, 169, 48, 56, 157, 4, 30, 202, 16, 228, 232, 160, 7, 189, 4, 30, 221, 13, 30, 240, 18, 144, 20, 162, 7, 189, 4, 30, 157, 13, 30, 169, 5, 157, 13, 150, 202, 16, 242, 232, 136, 16, 226, 166, 73, 164, 74, 96, 2, 8, 16, 15, 133, 0, 177, 0, 24, 144, 7, 74, 74, 74, 74, 74, 74, 74, 17, 2, 145, 2, 136, 16, 237, 173, 23, 34, 96, 133, 0, 177, 0, 24, 144, 8, 10, 10, 10, 10, 10, 10, 10, 10, 17, 2, 145, 2, 136, 16, 236, 96, 160, 7, 133, 0, 177, 0, 145, 2, 136, 16, 249, 96, 160, 7, 169, 0, 145, 2, 136, 16, 251, 96, 165, 10, 164, 8, 145, 6, 138, 133, 73, 10, 10, 10, 133, 2, 165, 73, 74, 74, 74, 74, 74, 9, 16, 133, 3, 96, 165, 19, 9, 1, 133, 22, 76, 109, 34, 165, 14, 41, 48, 201, 48, 240, 239, 165, 14, 230, 14, 41, 127, 72, 32, 69, 34, 32, 52, 34, 104, 200, 96, 165, 9, 201, 23, 176, 4, 165, 8, 201, 22, 168, 96, 32, 211, 34, 32, 121, 34, 176, 34, 177, 4, 240, 14, 170, 41, 48, 201, 48, 240, 19, 138, 41, 64, 197, 19, 240, 159, 32, 97, 34, 164, 8, 145, 4, 165, 10, 145, 6, 96, 169, 32, 133, 21, 169, 240, 133, 3, 96, 32, 211, 34, 32, 121, 34, 176, 22, 177, 4, 240, 18, 41, 48, 201, 48, 240, 12, 177, 4, 41, 64, 197, 19, 240, 4, 169, 0, 145, 4, 96, 164, 9, 185, 253, 237, 133, 4, 133, 6, 192, 12, 169, 15, 42, 133, 5, 41, 1, 9, 150, 133, 7, 164, 8, 96, 16, 5, 73, 255, 24, 105, 1, 96, 230, 68, 32, 252, 34, 76, 208, 36, 165, 97, 56, 245, 82, 32, 236, 34, 133, 74, 165, 113, 56, 245, 98, 32, 236, 34, 133, 75, 169, 2, 133, 73, 165, 75, 197, 74, 144, 8, 164, 74, 165, 75, 133, 74, 132, 75, 38, 73, 165, 97, 213, 82, 38, 73, 165, 113, 213, 98, 165, 73, 42, 10, 10, 141, 162, 36, 165, 74, 10, 240, 8, 176, 6, 6, 75, 240, 2, 144, 245, 106, 41, 240, 141, 167, 36, 181, 82, 141, 160, 36, 181, 98, 141, 161, 36, 160, 32, 96, 128, 64, 32, 16, 8, 4, 2, 1, 7, 6, 5, 4, 3, 2, 1, 0, 176, 200, 52, 122, 76, 103, 188, 218, 0, 0, 0, 17, 238, 17, 0, 0, 7, 15, 31, 62, 124, 248, 112, 160, 160, 80, 184, 124, 62, 31, 15, 7, 0, 48, 100, 236, 236, 100, 48, 0, 255, 129, 129, 129, 129, 129, 129, 255, 60, 150, 170, 195, 195, 170, 150, 60, 36, 102, 90, 165, 165, 90, 102, 60, 0, 0, 0, 0, 16, 0, 0, 0, 2, 0, 59, 18, 3, 0, 59, 16, 59, 14, 59, 12, 6, 0, 129, 43, 4, 43, 6, 43, 8, 43, 7, 43, 4, 43, 3, 130, 52, 0, 131, 0, 16, 20, 0, 4, 17, 0, 16, 10, 16, 9, 16, 20, 16, 21, 64, 22, 32, 20, 16, 5, 16, 22, 16, 5, 32, 15, 16, 5, 16, 10, 16, 5, 2, 7, 16, 8, 16, 3, 1, 12, 16, 22, 0, 1, 14, 1, 0, 1, 6, 4, 13, 0, 16, 22, 1, 19, 1, 3, 0, 2, 1, 2, 0, 0, 85, 84, 69, 84, 80, 4, 80, 64, 255, 255, 170, 255, 0, 85, 85, 85, 3, 3, 14, 15, 56, 60, 225, 241, 192, 192, 176, 240, 44, 124, 91, 91, 225, 225, 225, 225, 225, 225, 225, 225, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 90, 95, 84, 85, 85, 85, 225, 225, 161, 241, 1, 85, 85, 85, 22, 14, 14, 22, 0, 0, 38, 54, 62, 70, 46, 30, 0, 0, 22, 14, 14, 22, 0, 0, 2, 4, 6, 10, 14, 14, 14, 14, 10, 6, 4, 2, 0, 0, 0, 0, 254, 252, 248, 244, 240, 240, 240, 240, 244, 248, 252, 254, 0, 0, 240, 16, 0, 3, 102, 15, 40, 0, 0, 0, 0, 9, 110, 184, 39, 0, 0, 0, 0, 7, 118, 248, 39, 0, 0, 0, 0, 7, 126, 0, 40, 0, 0, 0, 0, 15, 134, 26, 39, 0, 176, 0, 65, 15, 150, 131, 39, 0, 176, 0, 66, 1, 158, 7, 39, 0, 0, 0, 0, 5, 142, 191, 38, 0, 0, 0, 128, 1, 166, 203, 38, 0, 0, 0, 128, 7, 0, 234, 38, 15, 134, 76, 132, 77, 160, 15, 165, 20, 41, 15, 170, 230, 20, 181, 114, 48, 8, 136, 16, 242, 166, 76, 164, 77, 96, 164, 77, 76, 10, 37, 134, 76, 132, 77, 32, 158, 33, 141, 192, 36, 32, 158, 33, 41, 248, 141, 193, 36, 32, 158, 33, 41, 3, 141, 199, 36, 160, 64, 169, 82, 141, 19, 37, 185, 128, 36, 149, 82, 200, 173, 19, 37, 201, 194, 240, 200, 105, 16, 141, 19, 37, 76, 15, 37, 32, 238, 34, 24, 117, 98, 149, 98, 96, 32, 238, 34, 24, 117, 82, 149, 82, 96, 181, 82, 24, 105, 8, 201, 184, 176, 7, 181, 98, 24, 105, 8, 201, 192, 96, 134, 73, 160, 15, 196, 73, 240, 46, 185, 114, 0, 48, 41, 181, 82, 56, 249, 82, 0, 32, 236, 34, 201, 8, 176, 28, 169, 8, 133, 75, 185, 146, 0, 201, 110, 208, 4, 169, 2, 133, 75, 181, 98, 56, 249, 98, 0, 32, 236, 34, 197, 75, 144, 4, 136, 16, 203, 56, 96, 162, 15, 181, 114, 16, 3, 32, 223, 37, 202, 16, 246, 162, 15, 181, 114, 48, 13, 169, 0, 133, 21, 32, 223, 37, 165, 21, 21, 114, 149, 114, 202, 16, 236, 162, 15, 181, 210, 133, 8, 181, 226, 133, 9, 32, 180, 34, 230, 8, 32, 183, 34, 198, 8, 230, 9, 32, 180, 34, 230, 8, 32, 183, 34, 32, 210, 37, 149, 210, 181, 98, 32, 212, 37, 149, 226, 202, 16, 213, 96, 181, 82, 201, 248, 176, 4, 74, 74, 74, 96, 169, 255, 96, 134, 78, 169, 35, 133, 1, 181, 146, 133, 0, 133, 16, 181, 130, 133, 10, 32, 210, 37, 133, 8, 181, 98, 74, 74, 74, 133, 9, 181, 82, 41, 7, 141, 23, 34, 168, 185, 94, 35, 141, 254, 33, 181, 98, 41, 7, 133, 15, 168, 185, 94, 35, 133, 18, 32, 211, 34, 32, 82, 38, 32, 248, 33, 240, 10, 230, 8, 32, 82, 38, 32, 17, 34, 198, 8, 165, 15, 240, 33, 230, 9, 32, 133, 34, 165, 0, 56, 101, 18, 133, 17, 164, 15, 136, 32, 248, 33, 240, 13, 230, 8, 32, 136, 34, 165, 17, 164, 15, 136, 32, 17, 34, 166, 78, 96, 32, 136, 34, 165, 2, 24, 101, 15, 133, 2, 165, 16, 164, 18, 96, 5, 2, 4, 6, 3, 7, 185, 82, 0, 141, 184, 36, 185, 98, 0, 141, 185, 36, 132, 79, 164, 59, 185, 97, 38, 141, 191, 36, 160, 56, 32, 208, 36, 164, 79, 96, 198, 57, 208, 3, 32, 103, 38, 56, 96, 32, 71, 37, 176, 8, 185, 114, 0, 74, 176, 236, 74, 96, 24, 96, 181, 82, 41, 7, 133, 73, 165, 23, 41, 7, 197, 73, 208, 240, 181, 114, 10, 10, 10, 96, 165, 12, 74, 144, 6, 152, 41, 8, 9, 1, 168, 148, 130, 96, 180, 194, 165, 12, 74, 74, 32, 180, 38, 76, 226, 38, 165, 22, 240, 4, 169, 0, 149, 130, 165, 12, 74, 144, 230, 181, 194, 240, 2, 208, 6, 169, 6, 149, 130, 169, 1, 32, 45, 37, 76, 203, 39, 181, 194, 74, 74, 168, 185, 244, 33, 149, 130, 181, 146, 109, 4, 144, 149, 146, 169, 1, 32, 39, 37, 214, 194, 16, 222, 76, 238, 36, 32, 158, 33, 41, 127, 208, 212, 32, 244, 34, 76, 226, 38, 32, 252, 34, 76, 10, 37, 32, 158, 33, 41, 3, 240, 243, 169, 214, 141, 92, 39, 141, 111, 39, 160, 246, 181, 114, 74, 74, 74, 144, 3, 140, 111, 39, 74, 144, 3, 140, 92, 39, 160, 82, 140, 93, 39, 160, 98, 140, 112, 39, 74, 144, 20, 140, 93, 39, 169, 82, 141, 112, 39, 173, 92, 39, 172, 111, 39, 140, 92, 39, 141, 111, 39, 246, 98, 181, 194, 168, 74, 74, 74, 74, 133, 73, 152, 41, 15, 56, 229, 73, 176, 2, 246, 82, 41, 15, 133, 73, 152, 41, 240, 5, 73, 149, 194, 32, 171, 38, 176, 82, 144, 72, 165, 13, 201, 8, 144, 10, 32, 158, 33, 41, 63, 208, 3, 32, 244, 34, 169, 4, 32, 45, 37, 165, 13, 201, 3, 144, 23, 160, 15, 32, 177, 38, 181, 82, 74, 74, 24, 101, 24, 41, 31, 168, 185, 96, 36, 24, 101, 56, 149, 98, 76, 203, 39, 169, 11, 133, 81, 32, 142, 38, 176, 22, 32, 171, 38, 176, 13, 165, 81, 32, 48, 37, 32, 54, 37, 144, 39, 76, 238, 36, 230, 68, 16, 249, 32, 238, 36, 169, 7, 133, 65, 185, 82, 0, 141, 200, 36, 185, 98, 0, 141, 201, 36, 152, 170, 32, 238, 36, 32, 171, 33, 160, 72, 76, 208, 36, 96, 169, 8, 32, 36, 37, 76, 5, 40, 169, 8, 32, 39, 37, 160, 7, 32, 177, 38, 169, 8, 76, 186, 39, 169, 3, 149, 130, 165, 62, 240, 7, 160, 2, 32, 177, 38, 198, 62, 32, 157, 38, 176, 78, 32, 71, 37, 176, 97, 185, 162, 0, 201, 191, 208, 55, 169, 15, 133, 67, 134, 76, 152, 170, 32, 242, 36, 160, 10, 32, 171, 33, 136, 208, 250, 165, 59, 201, 5, 240, 4, 230, 59, 208, 61, 32, 158, 33, 48, 15, 165, 97, 74, 74, 74, 133, 71, 133, 72, 169, 22, 133, 70, 208, 41, 169, 255, 133, 62, 208, 35, 165, 62, 208, 31, 185, 114, 0, 41, 64, 240, 24, 198, 64, 169, 104, 133, 63, 169, 15, 133, 69, 169, 7, 133, 65, 138, 168, 76, 218, 39, 169, 1, 76, 48, 37, 181, 82, 201, 240, 176, 245, 169, 0, 141, 19, 145, 173, 17, 145, 168, 41, 32, 208, 93, 165, 61, 208, 89, 132, 58, 165, 12, 74, 41, 7, 117, 82, 141, 136, 36, 181, 82, 141, 144, 36, 141, 152, 36, 181, 98, 141, 137, 36, 141, 145, 36, 141, 153, 36, 238, 137, 36, 169, 7, 133, 66, 165, 60, 133, 61, 165, 62, 208, 4, 169, 1, 149, 130, 160, 8, 32, 208, 36, 165, 59, 160, 4, 74, 144, 2, 160, 2, 132, 60, 165, 59, 74, 240, 16, 160, 24, 32, 208, 36, 165, 59, 41, 252, 240, 5, 160, 16, 32, 208, 36, 164, 58, 165, 61, 240, 2, 198, 61, 152, 41, 4, 208, 11, 181, 98, 201, 12, 144, 5, 169, 4, 32, 36, 37, 152, 41, 8, 208, 11, 181, 98, 201, 175, 176, 5, 169, 4, 32, 39, 37, 152, 41, 16, 208, 11, 181, 82, 201, 3, 144, 5, 169, 3, 76, 45, 37, 169, 0, 141, 34, 145, 173, 32, 145, 48, 11, 181, 82, 201, 168, 176, 5, 169, 3, 76, 48, 37, 96, 165, 70, 240, 117, 198, 70, 160, 14, 132, 80, 185, 114, 0, 41, 64, 240, 18, 165, 57, 24, 101, 54, 201, 6, 208, 6, 32, 103, 38, 76, 104, 41, 32, 218, 39, 164, 80, 136, 16, 224, 32, 158, 33, 41, 7, 24, 105, 21, 141, 1, 144, 9, 128, 141, 10, 144, 141, 13, 144, 198, 71, 230, 72, 165, 71, 133, 8, 169, 64, 32, 159, 41, 169, 0, 133, 57, 32, 159, 41, 165, 72, 133, 8, 169, 0, 32, 159, 41, 169, 64, 141, 179, 41, 169, 22, 133, 9, 32, 211, 34, 192, 22, 176, 17, 32, 137, 43, 240, 8, 169, 0, 145, 4, 169, 1, 145, 6, 198, 9, 16, 232, 230, 8, 96, 162, 247, 169, 0, 149, 0, 157, 255, 29, 157, 246, 30, 157, 237, 31, 224, 9, 176, 24, 157, 255, 15, 169, 48, 157, 3, 30, 189, 101, 35, 157, 207, 17, 181, 247, 157, 12, 30, 169, 255, 141, 0, 18, 202, 208, 212, 32, 63, 45, 169, 128, 133, 2, 169, 19, 133, 3, 169, 36, 133, 1, 169, 14, 160, 15, 32, 42, 34, 162, 80, 189, 128, 137, 157, 128, 17, 169, 3, 157, 0, 150, 202, 16, 242, 162, 58, 142, 1, 30, 169, 7, 141, 2, 150, 169, 22, 133, 51, 160, 5, 32, 146, 43, 169, 3, 133, 50, 133, 64, 162, 14, 32, 238, 36, 202, 16, 250, 162, 255, 154, 169, 150, 133, 62, 232, 134, 61, 134, 59, 32, 164, 37, 162, 15, 160, 0, 32, 10, 37, 165, 68, 240, 12, 169, 128, 141, 13, 144, 169, 47, 141, 14, 144, 208, 9, 133, 22, 165, 65, 208, 3, 141, 13, 144, 165, 69, 240, 10, 9, 32, 141, 14, 144, 9, 128, 76, 126, 42, 165, 67, 240, 19, 9, 32, 141, 14, 144, 169, 252, 141, 10, 144, 141, 11, 144, 141, 12, 144, 76, 188, 42, 141, 10, 144, 141, 11, 144, 141, 12, 144, 165, 65, 240, 14, 10, 9, 32, 141, 14, 144, 169, 196, 141, 13, 144, 76, 172, 42, 165, 68, 208, 3, 141, 13, 144, 165, 66, 240, 12, 10, 10, 9, 192, 141, 11, 144, 169, 47, 141, 14, 144, 162, 4, 181, 65, 240, 2, 214, 65, 202, 16, 247, 165, 64, 24, 105, 48, 141, 2, 30, 165, 19, 73, 64, 133, 19, 9, 1, 133, 14, 165, 63, 240, 23, 198, 63, 208, 19, 165, 64, 240, 3, 76, 54, 42, 162, 7, 189, 13, 30, 149, 248, 202, 16, 248, 34, 1, 162, 15, 181, 178, 141, 4, 43, 181, 162, 141, 3, 43, 134, 80, 32, 52, 18, 166, 80, 202, 16, 236, 165, 13, 201, 4, 144, 33, 32, 187, 43, 32, 5, 45, 32, 158, 33, 41, 63, 208, 20, 164, 51, 136, 152, 10, 10, 10, 141, 177, 36, 169, 176, 141, 176, 36, 160, 48, 32, 208, 36, 165, 12, 41, 127, 9, 0, 208, 39, 32, 158, 33, 41, 120, 24, 105, 16, 133, 56, 74, 74, 74, 133, 9, 169, 21, 133, 8, 32, 211, 34, 32, 137, 43, 240, 229, 169, 8, 133, 54, 169, 6, 133, 57, 169, 3, 133, 55, 165, 54, 240, 20, 198, 55, 208, 16, 169, 3, 133, 55, 198, 54, 165, 56, 141, 169, 36, 160, 40, 32, 208, 36, 32, 130, 37, 34, 2, 230, 12, 208, 2, 230, 13, 32, 69, 41, 76, 76, 42, 164, 8, 177, 4, 41, 48, 201, 48, 96, 72, 166, 26, 232, 138, 202, 41, 31, 133, 26, 169, 22, 24, 101, 24, 157, 32, 1, 165, 51, 157, 64, 1, 169, 0, 157, 96, 1, 152, 157, 0, 1, 104, 96, 165, 40, 230, 40, 76, 109, 34, 165, 23, 198, 23, 41, 7, 240, 11, 165, 12, 74, 176, 235, 76, 145, 44, 76, 237, 44, 230, 24, 169, 36, 133, 1, 169, 0, 133, 27, 162, 5, 149, 34, 202, 16, 251, 169, 114, 133, 40, 165, 25, 41, 31, 133, 47, 165, 47, 41, 31, 197, 26, 240, 218, 170, 189, 96, 1, 133, 48, 189, 64, 1, 133, 9, 189, 32, 1, 56, 229, 24, 133, 8, 133, 75, 189, 0, 1, 170, 181, 34, 240, 91, 165, 8, 201, 253, 240, 78, 176, 15, 201, 22, 176, 177, 32, 211, 34, 169, 15, 145, 6, 181, 34, 145, 4, 230, 8, 165, 8, 201, 22, 176, 10, 32, 211, 34, 181, 34, 24, 105, 1, 145, 4, 230, 8, 165, 8, 201, 22, 176, 22, 32, 211, 34, 189, 90, 36, 240, 12, 201, 30, 176, 8, 56, 233, 14, 74, 74, 74, 9, 112, 145, 4, 198, 48, 48, 11, 198, 9, 165, 75, 133, 8, 76, 16, 44, 230, 25, 230, 47, 76, 233, 43, 32, 180, 43, 149, 34, 189, 78, 36, 240, 5, 32, 40, 34, 48, 3, 32, 52, 34, 32, 180, 43, 189, 84, 36, 32, 40, 34, 189, 90, 36, 164, 27, 153, 28, 0, 230, 27, 76, 14, 44, 169, 144, 133, 41, 169, 19, 133, 42, 133, 44, 162, 0, 228, 27, 240, 76, 165, 41, 24, 105, 8, 133, 43, 181, 28, 240, 12, 201, 30, 176, 8, 56, 233, 14, 74, 74, 74, 9, 112, 32, 69, 34, 133, 46, 165, 2, 133, 45, 160, 7, 177, 45, 42, 133, 73, 177, 43, 42, 133, 74, 177, 41, 42, 133, 75, 165, 73, 10, 165, 74, 42, 145, 43, 165, 75, 42, 145, 41, 136, 16, 225, 165, 41, 24, 105, 16, 133, 41, 232, 76, 157, 44, 169, 128, 133, 41, 169, 19, 133, 42, 160, 15, 177, 41, 10, 105, 0, 10, 105, 0, 145, 41, 136, 16, 243, 96, 165, 23, 41, 7, 208, 43, 198, 50, 16, 39, 164, 49, 185, 206, 35, 208, 86, 164, 52, 230, 52, 185, 174, 35, 48, 24, 133, 49, 240, 69, 230, 52, 185, 175, 35, 133, 53, 76, 15, 45, 32, 146, 43, 157, 96, 1, 165, 51, 24, 96, 41, 7, 170, 32, 63, 45, 208, 208, 189, 88, 45, 141, 26, 43, 189, 92, 45, 141, 11, 39, 189, 96, 45, 141, 54, 43, 189, 100, 45, 141, 31, 39, 96, 63, 31, 63, 63, 127, 127, 127, 127, 0, 1, 0, 0, 9, 240, 240, 240, 133, 52, 240, 163, 133, 50, 200, 185, 206, 35, 200, 132, 49, 24, 101, 53, 133, 73, 165, 51, 197, 73, 240, 182, 176, 32, 160, 0, 32, 146, 43, 200, 230, 51, 165, 73, 24, 229, 51, 240, 42, 144, 40, 32, 45, 45, 125, 96, 1, 133, 51, 157, 64, 1, 230, 51, 208, 25, 160, 3, 32, 146, 43, 200, 198, 51, 165, 51, 24, 229, 73, 240, 10, 144, 8, 32, 45, 45, 253, 96, 1, 133, 51, 200, 76, 146, 43};

int
main (int argc, char * argv[])
{
    struct vic20_config config = {
        .is_expanded = FALSE,
        .use_paddles = FALSE,
        .manual_screen_updates = TRUE,
        .frames_per_second = 36,
        .frame_interceptor = NULL
    };

    joystick_open ();
    video_open ();
    video_map ();
    vic20_open (&config);
    memcpy (&m[0x2000], pulse_image, sizeof (pulse_image));
    vic20_emulate (0x2000);
    vic20_close ();
    video_close ();
    joystick_close ();

    return 0;
}
